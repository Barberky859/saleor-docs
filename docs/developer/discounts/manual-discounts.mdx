---
title: Manual Discounts
sidebar_label: Manual Discounts
---

## Introduction
Manual discounts can be applied by staff users to orders with `DRAFT` or `UNCONFIRMED` status.
The discount can't be combined and overrides all the others discounts applied to the same object.
The discount can be applied to the order, decreasing its subtotal and shipping price, or to the order line,
reducing its unit price.

### Manual line discount
The manual line discount can be applied with [`orderLineDiscountUpdate`](api-reference/orders/mutations/order-line-discount-update.mdx) mutation.
It cuts unit price of the order line. The basis for the discount is undiscounted unit price, meaning any other unit price reductions like catalogue promotions or
specific product vouchers are overridden.

#### Example

We have draft order with total price of **150$**, of which:
* **line 1** with quantity **2**, unit price **50$** and total **100$**
* **line 2** with quantity **1**, unit price **30$** and total **30$**
* shipping price **20$**

Let's apply **20%** manual line discount to the **line 1**:

Request:

```graphql
mutation OrderLineDiscountUpdate {
  orderLineDiscountUpdate(
    orderLineId: "T3JkZXJMaW5lOmFlYTBmNjMzLWU0MTItNDkwZS1hODhhLThlMTg3YzQ3N2ZkNQ==", 
    input: {
        valueType: PERCENTAGE,
        value: 20,
        reason: "staff line discount"
  }
  ) {
    order {
      id
      undiscountedTotal{
        net{
          amount
        }
      }
      total{
        net{
          amount
        }
      }
      shippingPrice{
        net{
          amount
        }
      }
      lines{
        undiscountedTotalPrice{
            net{
                amount
            }
        }
        totalPrice{
            net{
                amount
            }
        }
        undiscountedUnitPrice{
            net{
                amount
            }
        }
        unitPrice{
            net{
                amount
            }
        }
        unitDiscount {
            amount
        }
      }
    }
  }
}
```

Response:

```json
{
    "data": {
        "orderLineDiscountUpdate": {
            "order": {
                "id": "T3JkZXI6MTRjODlkMDUtYjg4Ny00YzQ1LWI1MDUtYmZlZDVmZmY0ZTQz",
                "undiscountedTotal": {
                    "net": {
                        "amount": 150.0
                    }
                },
                "total": {
                    "net": {
                        "amount": 130.0
                    }
                },
                "shippingPrice": {
                    "net": {
                        "amount": 20.0
                    }
                },
                "lines": [
                    {
                        "id": "T3JkZXJMaW5lOmFlYTBmNjMzLWU0MTItNDkwZS1hODhhLThlMTg3YzQ3N2ZkNQ==",
                        "quantity": 2,
                        "undiscountedTotalPrice": {
                            "net": {
                                "amount": 100.0
                            }
                        },
                        "totalPrice": {
                            "net": {
                                "amount": 80.0
                            }
                        },
                        "undiscountedUnitPrice": {
                            "net": {
                                "amount": 50.0
                            }
                        },
                        "unitPrice": {
                            "net": {
                                "amount": 40.0
                            }
                        },
                        "unitDiscount": {
                            "amount": 10.0
                        }
                    },
                    {
                        "id": "T3JkZXJMaW5lOmU3ZWY1YjY4LTUzYmMtNGIyOC1iMmU2LWI0YjI3OWE0NTg2OA==",
                        "quantity": 1,
                        "undiscountedTotalPrice": {
                            "net": {
                                "amount": 30.0
                            }
                        },
                        "totalPrice": {
                            "net": {
                                "amount": 30.0
                            }
                        },
                        "undiscountedUnitPrice": {
                            "net": {
                                "amount": 30.0
                            }
                        },
                        "unitPrice": {
                            "net": {
                                "amount": 30.0
                            }
                        },
                        "unitDiscount": {
                            "amount": 0.0
                        }
                    }
                ]
            }
        }
    }
}
```
As a result, the discount reduced line 1 unit price from 50$ to 40$. 

### Manual order discount
The manual order discount can be applied with [`orderDiscountAdd`](api-reference/orders/mutations/order-discount-add.mdx) mutation.
It affects both subtotal and shipping price. When the order qualify for order promotion or has entire order voucher applied, 
the manual order discount takes precedence and override them. The basis for the calculation are [base subtotal](developer/price-calculation.mdx#discount-application) 
and [base shipping](developer/price-calculation.mdx#discount-application) prices, meaning [line-level](developer/discounts/overview.mdx#level) discounts are not overriden. 


#### Example

We have draft order with total price of **150$**, of which:
* **line 1** with quantity **2**, unit price **50$** and total **100$**
* **line 2** with quantity **1**, unit price **30$** and total **30$**
* shipping price **20$**

Let's apply **20%** manual order discount to the order:

Request:
```graphql
mutation OrderDiscountAdd{
  orderDiscountAdd(
    orderId: "T3JkZXI6NDhkYWNmYTMtZmE1Mi00N2FiLTk0ZGUtODE5NjFmNjllNzBi", 
    input: {
        valueType: PERCENTAGE,
        value: 20,
        reason: "staff order discount"
    }
  ) {
    errors {
        message
        field
        code
    }
    order {
      id
      undiscountedTotal{
            net{
                amount
            }
      }
      total{
            net{
                amount
            }
      }
      subtotal {
            net{
                amount
            }
      }
      undiscountedShippingPrice{
         amount
      }
      shippingPrice{
            net{
                amount
            }
      }
      lines{
        undiscountedTotalPrice{
            net{
                amount
            }
        }
        totalPrice{
            net{
                amount
            }
        }
        undiscountedUnitPrice{
            net{
                amount
            }
        }
        unitPrice{
            net{
                amount
            }
        }
        unitDiscount {
            amount
        }
      }
    }
  }
}
```

Response:
```json
{
    "data": {
        "orderDiscountAdd": {
            "errors": [],
            "order": {
                "id": "T3JkZXI6NDhkYWNmYTMtZmE1Mi00N2FiLTk0ZGUtODE5NjFmNjllNzBi",
                "undiscountedTotal": {
                    "net": {
                        "amount": 150.0
                    }
                },
                "total": {
                    "net": {
                        "amount": 120.0
                    }
                },
                "subtotal": {
                    "net": {
                        "amount": 104.0
                    }
                },
                "undiscountedShippingPrice": {
                    "amount": 20.0
                },
                "shippingPrice": {
                    "net": {
                        "amount": 16.0
                    }
                },
                "lines": [
                    {
                        "undiscountedTotalPrice": {
                            "net": {
                                "amount": 100.0
                            }
                        },
                        "totalPrice": {
                            "net": {
                                "amount": 80.0
                            }
                        },
                        "undiscountedUnitPrice": {
                            "net": {
                                "amount": 50.0
                            }
                        },
                        "unitPrice": {
                            "net": {
                                "amount": 40.0
                            }
                        },
                        "unitDiscount": {
                            "amount": 0.0
                        }
                    },
                    {
                        "undiscountedTotalPrice": {
                            "net": {
                                "amount": 30.0
                            }
                        },
                        "totalPrice": {
                            "net": {
                                "amount": 24.0
                            }
                        },
                        "undiscountedUnitPrice": {
                            "net": {
                                "amount": 30.0
                            }
                        },
                        "unitPrice": {
                            "net": {
                                "amount": 24.0
                            }
                        },
                        "unitDiscount": {
                            "amount": 0.0
                        }
                    }
                ]
            }
        }
    }
}
```

As a result the order's subtotal and shipping price were both reduced by 20%.